# 持久数据库

~~其实就是常说的数据库，只是此处与内存数据库做区分，叫做持久数据库~~

## 技术选择
直接拥抱开源无脑选PostgreSQL了。

对于用户数据库，关系型数据库是不二之选，技术沉淀丰富，社区活跃，使用广泛。

对于游戏数据库，一般会选择非关系型数据库（NoSQL），例如MongoDB这种文档型数据库，因为其可以适配游戏Schema-less的数据特性。但是对于本项目，我们似乎并不需要更新，所以为了简便也使用PostgreSQL了。

> **不冷不热的知识：** PostgreSQL可以通过插件当成NoSQL用。

## 表设计
### 用户表
基础的用户名、UID等先存进去，然后对于OPAQUE协议而言，我们不需要存储密码或密码hash，而是存储`opaque record`。

现代游戏的UID大多是固定位数，然后按注册时间来自增，所以可以自定义一个序列，然后使用`nextval`函数生成UID。

> **TODO:** 后续可能变动。

### 游戏数据表
还没做

> **笔记：** PostgreSQL使用了SQL方言，语法和MySQL的不完全兼容。